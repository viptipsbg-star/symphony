{% extends "bodybase.html.twig" %}

{% block bodycontainer %}
<h1>{{ "reports.manager_courses_empl.title"|trans }} - {{ user.employee.getFieldValue('name') }} {{ user.employee.getFieldValue('surname') }}</h1>
<div class="content-container">
    <div class="body-panel">
        <h2 class="coursetitle">{{ listening.course.name }}</h2>
        <div class="list-table manager-course-listening">
            <table class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>{{ "reports.manager_courses_empl.chapter_title"|trans }}</th>
                        <th>{{ "reports.manager_courses_empl.chapter_type"|trans }}</th>
                        <th>{{ "reports.manager_courses_empl.last_listen_date"|trans }}</th>
                        <th>{{ "reports.manager_courses_empl.completed"|trans }}</th>
                    </tr>
                </thead>
                <tbody>
                    {% for chapter in chaptersinfo %}
                    <tr>
                        <td>{{ chapter.name }}</td>
                        <td>
                        {% if chapter.type == "exam" %}
                        {{ "reports.manager_courses_empl.exam"|trans }}
                        {% elseif chapter.type == "video" %}
                        {{ "reports.manager_courses_empl.video"|trans }}
                        {% elseif chapter.type == "quiz" %}
                        {{ "reports.manager_courses_empl.quiz"|trans }}
                        {% elseif chapter.type == "lesson" %}
                        {{ "reports.manager_courses_empl.lesson"|trans }}
                        {% endif %}
                        </td>
                        <td>{{ chapter.updatetime|date("Y-m-d H:i:s") }}</td>
                        <td>
                            {% if chapter.completed %}
                                <span class="green-boolean"><span class="glyphicon glyphicon-ok" aria-hidden="true"></span></span>
                            {% else %}
                                <span class="red-boolean"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></span>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% if listening.examAttempts is not empty %}
        <div class="list-table manager-employee-exam">
            <h2>{{ "reports.manager_courses_empl.exam_completion"|trans }}</h2>
            <table class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>{{ "reports.manager_courses_empl.exam_start_date"|trans }}</th>
                        <th>{{ "reports.manager_courses_empl.exam_end_date"|trans }}</th>
                        <th>{{ "reports.manager_courses_empl.exam_result"|trans }}</th>
                        <th>{{ "reports.manager_courses_empl.exam_correct_answers_all"|trans }}</th>
                    </tr>
                </thead>
                <tbody>
                    {% for attempt in listening.examAttempts %}
                    <tr>
                        <td>{{ attempt.starttime|date("Y-m-d H:i:s") }}</td>
                        <td>{{ attempt.endtime|date("Y-m-d H:i:s") }}</td>
                        <td>
                        {% if attempt.result is not empty %}
                            {% if attempt.passed %}
                            <span class="green-boolean">{{ attempt.result }}%</span>
                            {% else %}
                            <span class="red-boolean">{{ attempt.result }}%</span>
                            {% endif %}
                        {% endif %}
                        </td>
                        <td>
                        {% if attempt.result is not empty %}
                            {{ examcorrectanswerscounts[attempt.id] }} / {{ attempt.distinctQuestions|length }}
                        {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% endif %}
    </div>
</div>

{% endblock %}

{% block stylesheets %}
    {% stylesheets '@ElearningCoursesBundle/Resources/less/styles.less'
    '@ElearningCoursesBundle/Resources/less/responsive.less' filter="cssrewrite" %}
        <link rel="stylesheet" href="{{ asset_url }}">
    {% endstylesheets %}

{% endblock %}
