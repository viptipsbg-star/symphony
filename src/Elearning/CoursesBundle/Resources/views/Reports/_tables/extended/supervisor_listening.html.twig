{% extends "ElearningCoursesBundle:Reports/_tables:supervisor_listening.html.twig" %}

{% block versionlink %}
{% endblock %}

{% block table %}
    {% if groups is empty %}
        <h3 class="no-entries">{{ "reports.supervisor_listening.no_entries"|trans }}</h3>
    {% else %}
    <div class="list-table">
        <table class="table table-striped table-bordered report-table">
            <thead>
                <tr>
                    <th width="200">{{ "reports.supervisor_listening.name"|trans }}</th>
                    <th>{{ "reports.supervisor_listening.employees_count"|trans }}</th>
                    <th>{{ "reports.supervisor_listening.courses_count"|trans }}</th>
                    <th>{{ "reports.supervisor_listening.avg_result"|trans }}</th>
                    <th>{{ "reports.supervisor_listening.avg_attendance"|trans }}</th>

                    {% if view == 'html' %}
                        <th>{{ "reports.supervisor_listening.detail"|trans }}</th>
                    {% endif %}
                </tr>
            </thead>
            <tbody>
                {% for group in groups %}
                <tr>
                    <td>{{ group.title }}</td>
                    <td>{{ group.id in employeescounts|keys ? employeescounts[group.id]['num'] : "0" }}</td>
                    <td>{{ group.id in courses|keys ? courses[group.id]['cnt'] : "0" }}</td>
                    <td>{{ group.id in avgResults|keys ? avgResults[group.id]['avg_result']|number_format(2) ~ '%' : "" }}</td>
                    <td>
                        {{ group.id in attendance|keys and attendance[group.id]['total'] ?
                            (attendance[group.id]['completed'] / attendance[group.id]['total'] * 100)|number_format(2) ~ '%' :
                        "" }}
                    </td>
                    {% if view == 'html' %}
                        <td>
                            <a href="{{ path("elearning_courses_report_supervisor_listening_group", {group_id:group.id}) }}">{{ "reports.supervisor_listening.detail"|trans }}</a>
                        </td>
                    {% endif %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% if view == 'html' %}
            <div class="pagination">
                {{ knp_pagination_render(groups) }}
            </div>
        {% endif %}
    </div>
    {% endif %}
{% endblock %}

